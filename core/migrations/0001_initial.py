# Generated by Django 6.0.2 on 2026-02-22 17:55

import django.core.validators
import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='AcademicYear',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=20, unique=True)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('is_current', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
            options={
                'ordering': ['-start_date'],
            },
        ),
        migrations.CreateModel(
            name='Department',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('code', models.CharField(max_length=20, unique=True)),
                ('hod_name', models.CharField(max_length=200)),
                ('hod_email', models.EmailField(max_length=254)),
                ('hod_phone', models.CharField(max_length=15)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
        ),
        migrations.CreateModel(
            name='Faculty',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('code', models.CharField(max_length=20, unique=True)),
                ('dean_name', models.CharField(max_length=200)),
                ('dean_email', models.EmailField(max_length=254)),
                ('dean_phone', models.CharField(max_length=15)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
            ],
        ),
        migrations.CreateModel(
            name='Industry',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, unique=True)),
                ('description', models.TextField(blank=True)),
                ('icon', models.CharField(blank=True, help_text='FontAwesome icon class', max_length=50)),
            ],
            options={
                'verbose_name_plural': 'Industries',
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='Announcement',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200)),
                ('content', models.TextField()),
                ('priority', models.CharField(choices=[('low', 'Low'), ('medium', 'Medium'), ('high', 'High'), ('urgent', 'Urgent')], default='medium', max_length=20)),
                ('target_user_types', models.JSONField(default=list, help_text='List of user types to target')),
                ('target_departments', models.JSONField(default=list, help_text='List of department IDs')),
                ('target_years', models.JSONField(default=list, help_text='List of years of study')),
                ('publish_date', models.DateTimeField()),
                ('expiry_date', models.DateTimeField()),
                ('show_as_popup', models.BooleanField(default=False)),
                ('requires_acknowledgment', models.BooleanField(default=False)),
                ('is_active', models.BooleanField(default=True)),
                ('view_count', models.IntegerField(default=0)),
                ('acknowledgment_count', models.IntegerField(default=0)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-publish_date'],
            },
        ),
        migrations.CreateModel(
            name='AttachmentPeriod',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100)),
                ('application_start_date', models.DateField()),
                ('application_deadline', models.DateField()),
                ('placement_deadline', models.DateField(help_text='Deadline for securing placement')),
                ('start_date', models.DateField(help_text='When attachment should start')),
                ('end_date', models.DateField(help_text='When attachment should end')),
                ('report_submission_deadline', models.DateField(help_text='Deadline for submitting final report')),
                ('duration_weeks', models.IntegerField(default=12, help_text='Standard duration in weeks')),
                ('min_duration_weeks', models.IntegerField(default=8)),
                ('max_duration_weeks', models.IntegerField(default=16)),
                ('max_students', models.IntegerField(default=500, help_text='Maximum students for this period')),
                ('current_applications', models.IntegerField(default=0)),
                ('is_active', models.BooleanField(default=False)),
                ('is_open_for_applications', models.BooleanField(default=True)),
                ('is_open_for_placements', models.BooleanField(default=True)),
                ('required_documents', models.JSONField(default=list, help_text='List of required document types')),
                ('min_cgpa_required', models.DecimalField(decimal_places=2, default=0.0, max_digits=3)),
                ('min_year_of_study', models.IntegerField(default=3)),
                ('attachment_fee', models.DecimalField(decimal_places=2, default=0.0, max_digits=10)),
                ('admin_fee', models.DecimalField(decimal_places=2, default=0.0, max_digits=10)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('academic_year', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='attachment_periods', to='core.academicyear')),
            ],
            options={
                'ordering': ['-start_date'],
            },
        ),
        migrations.CreateModel(
            name='AttachmentApplication',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('proposed_start_date', models.DateField()),
                ('proposed_end_date', models.DateField()),
                ('position_applied', models.CharField(max_length=200)),
                ('department_section', models.CharField(blank=True, help_text='Specific department within organization', max_length=200)),
                ('motivation_statement', models.TextField(help_text='Why you want this attachment')),
                ('what_you_hope_to_learn', models.TextField(blank=True)),
                ('relevant_skills', models.TextField(blank=True)),
                ('previous_experience', models.TextField(blank=True)),
                ('motivation_letter', models.FileField(upload_to='documents/applications/motivation/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf'])])),
                ('introduction_letter', models.FileField(blank=True, null=True, upload_to='documents/applications/introduction/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf'])])),
                ('cv_uploaded', models.FileField(blank=True, null=True, upload_to='documents/applications/cv/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf'])])),
                ('acceptance_letter', models.FileField(blank=True, null=True, upload_to='documents/applications/acceptance/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf'])])),
                ('offer_letter', models.FileField(blank=True, null=True, upload_to='documents/applications/offer/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf'])])),
                ('status', models.CharField(choices=[('draft', 'Draft'), ('submitted', 'Submitted'), ('documents_verified', 'Documents Verified'), ('department_review', 'Under Department Review'), ('coordinator_review', 'Under Coordinator Review'), ('approved', 'Approved'), ('rejected', 'Rejected'), ('placed', 'Placed'), ('ongoing', 'Ongoing'), ('completed', 'Completed'), ('terminated', 'Terminated'), ('withdrawn', 'Withdrawn')], default='draft', max_length=20)),
                ('submitted_at', models.DateTimeField(blank=True, null=True)),
                ('documents_verified_at', models.DateTimeField(blank=True, null=True)),
                ('department_approved_at', models.DateTimeField(blank=True, null=True)),
                ('department_comments', models.TextField(blank=True)),
                ('coordinator_approved_at', models.DateTimeField(blank=True, null=True)),
                ('coordinator_comments', models.TextField(blank=True)),
                ('rejection_reason', models.TextField(blank=True)),
                ('rejected_at', models.DateTimeField(blank=True, null=True)),
                ('rejection_stage', models.CharField(blank=True, help_text='Stage at which rejected', max_length=50)),
                ('assigned_at', models.DateTimeField(blank=True, null=True)),
                ('industry_supervisor_name', models.CharField(blank=True, max_length=200)),
                ('industry_supervisor_title', models.CharField(blank=True, max_length=100)),
                ('industry_supervisor_email', models.EmailField(blank=True, max_length=254)),
                ('industry_supervisor_phone', models.CharField(blank=True, max_length=15)),
                ('stipend_agreed', models.BooleanField(default=False)),
                ('stipend_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('stipend_currency', models.CharField(default='KES', max_length=3)),
                ('stipend_notes', models.TextField(blank=True)),
                ('accommodation_provided', models.BooleanField(default=False)),
                ('accommodation_details', models.TextField(blank=True)),
                ('current_week', models.IntegerField(default=0)),
                ('total_weeks', models.IntegerField(default=12)),
                ('progress_percentage', models.IntegerField(default=0)),
                ('industry_supervisor_marks', models.IntegerField(blank=True, null=True)),
                ('university_supervisor_marks', models.IntegerField(blank=True, null=True)),
                ('report_marks', models.IntegerField(blank=True, null=True)),
                ('logbook_presentation_marks', models.IntegerField(blank=True, null=True)),
                ('total_marks', models.IntegerField(blank=True, null=True)),
                ('grade', models.CharField(blank=True, help_text='A, B, C, etc.', max_length=2)),
                ('completed_at', models.DateTimeField(blank=True, null=True)),
                ('completion_certificate', models.FileField(blank=True, null=True, upload_to='documents/applications/certificates/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('coordinator_approved_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='coordinator_approved_applications', to=settings.AUTH_USER_MODEL)),
                ('last_updated_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='updated_applications', to=settings.AUTH_USER_MODEL)),
                ('rejected_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='rejected_applications', to=settings.AUTH_USER_MODEL)),
                ('attachment_period', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='applications', to='core.attachmentperiod')),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Course',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('code', models.CharField(max_length=20, unique=True)),
                ('level', models.CharField(choices=[('certificate', 'Certificate'), ('diploma', 'Diploma'), ('degree', "Bachelor's Degree"), ('masters', "Master's Degree"), ('phd', 'PhD')], max_length=20)),
                ('duration_years', models.IntegerField(default=4)),
                ('requires_attachment', models.BooleanField(default=True)),
                ('attachment_semester', models.IntegerField(default=3, help_text='Semester when attachment is done')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('department', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='courses', to='core.department')),
            ],
        ),
        migrations.CreateModel(
            name='Document',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('document_type', models.CharField(choices=[('application_letter', 'Application Letter'), ('introduction_letter', 'Introduction Letter'), ('acceptance_letter', 'Acceptance Letter'), ('offer_letter', 'Offer Letter'), ('logbook', 'Logbook'), ('evaluation', 'Evaluation'), ('report', 'Report'), ('transcript', 'Academic Transcript'), ('recommendation', 'Recommendation Letter'), ('certificate', 'Certificate'), ('other', 'Other')], max_length=20)),
                ('title', models.CharField(max_length=200)),
                ('description', models.TextField(blank=True)),
                ('file', models.FileField(upload_to='documents/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf', 'doc', 'docx', 'jpg', 'png'])])),
                ('file_size', models.IntegerField(blank=True, help_text='File size in bytes', null=True)),
                ('mime_type', models.CharField(blank=True, max_length=100)),
                ('uploaded_at', models.DateTimeField(auto_now_add=True)),
                ('is_verified', models.BooleanField(default=False)),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
                ('verification_notes', models.TextField(blank=True)),
                ('application', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='documents', to='core.attachmentapplication')),
                ('uploaded_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
                ('verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='verified_documents', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='Evaluation',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('evaluation_type', models.CharField(choices=[('mid_term', 'Mid-Term Evaluation'), ('final', 'Final Evaluation')], max_length=20)),
                ('punctuality', models.IntegerField(help_text='Arrives on time, meets deadlines', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('reliability', models.IntegerField(help_text='Can be depended on to complete tasks', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('initiative', models.IntegerField(help_text='Self-starter, proactive approach', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('teamwork', models.IntegerField(help_text='Works well with others', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('communication', models.IntegerField(help_text='Clear verbal and written communication', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('professionalism', models.IntegerField(help_text='Professional demeanor and appearance', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('technical_knowledge', models.IntegerField(help_text='Applies academic knowledge to tasks', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('problem_solving', models.IntegerField(help_text='Ability to identify and solve problems', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('quality_of_work', models.IntegerField(help_text='Accuracy and thoroughness', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('productivity', models.IntegerField(help_text='Volume of work produced', validators=[django.core.validators.MinValueValidator(1), django.core.validators.MaxValueValidator(10)])),
                ('strengths', models.TextField()),
                ('areas_for_improvement', models.TextField()),
                ('general_comments', models.TextField()),
                ('recommendations', models.TextField(blank=True)),
                ('overall_score', models.DecimalField(blank=True, decimal_places=2, max_digits=5, null=True)),
                ('would_recommend', models.BooleanField(default=True)),
                ('recommend_for_employment', models.BooleanField(default=False)),
                ('evaluation_date', models.DateField(auto_now_add=True)),
                ('meeting_conducted', models.BooleanField(default=True)),
                ('meeting_notes', models.TextField(blank=True)),
                ('evaluator_signature', models.ImageField(blank=True, null=True, upload_to='signatures/evaluations/')),
                ('student_acknowledged', models.BooleanField(default=False)),
                ('student_acknowledged_at', models.DateTimeField(blank=True, null=True)),
                ('submitted_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('application', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='evaluations', to='core.attachmentapplication')),
                ('evaluator', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.AddField(
            model_name='department',
            name='faculty',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='departments', to='core.faculty'),
        ),
        migrations.CreateModel(
            name='LogBook',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('week_number', models.IntegerField()),
                ('week_start_date', models.DateField()),
                ('week_end_date', models.DateField()),
                ('monday_activities', models.TextField(blank=True)),
                ('monday_hours', models.DecimalField(decimal_places=1, default=8.0, max_digits=4)),
                ('tuesday_activities', models.TextField(blank=True)),
                ('tuesday_hours', models.DecimalField(decimal_places=1, default=8.0, max_digits=4)),
                ('wednesday_activities', models.TextField(blank=True)),
                ('wednesday_hours', models.DecimalField(decimal_places=1, default=8.0, max_digits=4)),
                ('thursday_activities', models.TextField(blank=True)),
                ('thursday_hours', models.DecimalField(decimal_places=1, default=8.0, max_digits=4)),
                ('friday_activities', models.TextField(blank=True)),
                ('friday_hours', models.DecimalField(decimal_places=1, default=8.0, max_digits=4)),
                ('saturday_activities', models.TextField(blank=True)),
                ('saturday_hours', models.DecimalField(decimal_places=1, default=0.0, max_digits=4)),
                ('sunday_activities', models.TextField(blank=True)),
                ('sunday_hours', models.DecimalField(decimal_places=1, default=0.0, max_digits=4)),
                ('tasks_completed', models.TextField()),
                ('skills_acquired', models.TextField()),
                ('challenges_faced', models.TextField()),
                ('lessons_learned', models.TextField()),
                ('plans_for_next_week', models.TextField(blank=True)),
                ('industry_supervisor_comments', models.TextField(blank=True)),
                ('industry_supervisor_approved', models.BooleanField(default=False)),
                ('industry_supervisor_approved_at', models.DateTimeField(blank=True, null=True)),
                ('industry_supervisor_signature', models.ImageField(blank=True, null=True, upload_to='signatures/')),
                ('university_supervisor_comments', models.TextField(blank=True)),
                ('university_supervisor_approved', models.BooleanField(default=False)),
                ('university_supervisor_approved_at', models.DateTimeField(blank=True, null=True)),
                ('supporting_documents', models.FileField(blank=True, null=True, upload_to='logbook/attachments/')),
                ('photos', models.ImageField(blank=True, null=True, upload_to='logbook/photos/')),
                ('submitted_at', models.DateTimeField(auto_now_add=True)),
                ('last_modified', models.DateTimeField(auto_now=True)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('application', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='logbooks', to='core.attachmentapplication')),
            ],
            options={
                'ordering': ['week_number'],
                'unique_together': {('application', 'week_number')},
            },
        ),
        migrations.CreateModel(
            name='LogBookComment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('comment', models.TextField()),
                ('is_private', models.BooleanField(default=False, help_text='Only visible to supervisors')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('logbook', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='comments', to='core.logbook')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.CreateModel(
            name='Message',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('subject', models.CharField(max_length=200)),
                ('body', models.TextField()),
                ('attachment', models.FileField(blank=True, null=True, upload_to='messages/')),
                ('is_read', models.BooleanField(default=False)),
                ('read_at', models.DateTimeField(blank=True, null=True)),
                ('is_archived_by_sender', models.BooleanField(default=False)),
                ('is_archived_by_recipient', models.BooleanField(default=False)),
                ('is_deleted_by_sender', models.BooleanField(default=False)),
                ('is_deleted_by_recipient', models.BooleanField(default=False)),
                ('is_urgent', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('parent_message', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='replies', to='core.message')),
                ('recipient', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='received_messages', to=settings.AUTH_USER_MODEL)),
                ('sender', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='sent_messages', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Organization',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=300)),
                ('registration_number', models.CharField(max_length=100, unique=True)),
                ('company_type', models.CharField(choices=[('private', 'Private Limited Company'), ('public', 'Public Limited Company'), ('ngo', 'Non-Governmental Organization'), ('government', 'Government Agency/Parastatal'), ('international', 'International Organization'), ('sme', 'Small & Medium Enterprise'), ('startup', 'Startup'), ('partnership', 'Partnership'), ('sole', 'Sole Proprietorship')], max_length=20)),
                ('physical_address', models.TextField()),
                ('postal_address', models.CharField(max_length=200)),
                ('city', models.CharField(max_length=100)),
                ('county', models.CharField(max_length=100)),
                ('country', models.CharField(default='Kenya', max_length=100)),
                ('website', models.URLField(blank=True)),
                ('contact_person_name', models.CharField(max_length=200)),
                ('contact_person_title', models.CharField(max_length=100)),
                ('contact_email', models.EmailField(max_length=254)),
                ('contact_phone', models.CharField(max_length=15)),
                ('alternate_phone', models.CharField(blank=True, max_length=15)),
                ('contact_person_id', models.CharField(blank=True, help_text='ID/Passport number of contact person', max_length=20)),
                ('hr_name', models.CharField(blank=True, max_length=200)),
                ('hr_email', models.EmailField(blank=True, max_length=254)),
                ('hr_phone', models.CharField(blank=True, max_length=15)),
                ('year_established', models.IntegerField()),
                ('employee_count', models.IntegerField()),
                ('annual_turnover', models.DecimalField(blank=True, decimal_places=2, max_digits=15, null=True)),
                ('kra_pin', models.CharField(max_length=20)),
                ('certificate_of_incorporation', models.FileField(upload_to='documents/organizations/incorporation/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf'])])),
                ('kra_pin_certificate', models.FileField(upload_to='documents/organizations/kra/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf'])])),
                ('business_permit', models.FileField(upload_to='documents/organizations/permits/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf'])])),
                ('audited_accounts', models.FileField(blank=True, null=True, upload_to='documents/organizations/accounts/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf'])])),
                ('director_id', models.FileField(blank=True, null=True, upload_to='documents/organizations/directors/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf'])])),
                ('verification_status', models.CharField(choices=[('pending', 'Pending Verification'), ('verified', 'Verified'), ('rejected', 'Rejected'), ('suspended', 'Suspended'), ('expired', 'Expired')], default='pending', max_length=20)),
                ('verified_at', models.DateTimeField(blank=True, null=True)),
                ('verification_notes', models.TextField(blank=True)),
                ('rejection_reason', models.TextField(blank=True)),
                ('verification_expiry', models.DateField(blank=True, help_text='Date when verification expires', null=True)),
                ('max_attachment_students', models.IntegerField(default=5)),
                ('current_attachment_students', models.IntegerField(default=0)),
                ('provides_stipend', models.BooleanField(default=False)),
                ('stipend_amount', models.DecimalField(blank=True, decimal_places=2, max_digits=10, null=True)),
                ('stipend_payment_schedule', models.CharField(blank=True, help_text='e.g., Monthly, End of attachment', max_length=100)),
                ('provides_accommodation', models.BooleanField(default=False)),
                ('accommodation_details', models.TextField(blank=True)),
                ('provides_meals', models.BooleanField(default=False)),
                ('provides_transport', models.BooleanField(default=False)),
                ('provides_ppe', models.BooleanField(default=False, help_text='Personal Protective Equipment')),
                ('has_industry_supervisor', models.BooleanField(default=True)),
                ('industry_supervisor_name', models.CharField(blank=True, max_length=200)),
                ('industry_supervisor_title', models.CharField(blank=True, max_length=100)),
                ('industry_supervisor_email', models.EmailField(blank=True, max_length=254)),
                ('industry_supervisor_phone', models.CharField(blank=True, max_length=15)),
                ('industry_supervisor_id', models.CharField(blank=True, max_length=20)),
                ('available_departments', models.TextField(blank=True, help_text='List departments separated by commas')),
                ('total_students_hosted', models.IntegerField(default=0)),
                ('average_rating', models.DecimalField(decimal_places=2, default=0.0, max_digits=3)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_organizations', to=settings.AUTH_USER_MODEL)),
                ('industry', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='organizations', to='core.industry')),
                ('verified_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='verified_organizations', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['name'],
            },
        ),
        migrations.AddField(
            model_name='attachmentapplication',
            name='organization',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='applications', to='core.organization'),
        ),
        migrations.CreateModel(
            name='OrganizationContact',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200)),
                ('title', models.CharField(max_length=100)),
                ('email', models.EmailField(max_length=254)),
                ('phone', models.CharField(max_length=15)),
                ('is_primary', models.BooleanField(default=False)),
                ('department', models.CharField(blank=True, max_length=100)),
                ('notes', models.TextField(blank=True)),
                ('organization', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='additional_contacts', to='core.organization')),
            ],
        ),
        migrations.CreateModel(
            name='Report',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('report_type', models.CharField(choices=[('student_progress', 'Student Progress Report'), ('organization_performance', 'Organization Performance'), ('supervisor_evaluations', 'Supervisor Evaluations'), ('placement_statistics', 'Placement Statistics'), ('compliance_report', 'Compliance Report'), ('financial_report', 'Financial Report')], max_length=30)),
                ('title', models.CharField(max_length=200)),
                ('parameters', models.JSONField(default=dict, help_text='Report parameters used')),
                ('format', models.CharField(choices=[('pdf', 'PDF'), ('excel', 'Excel'), ('csv', 'CSV')], default='pdf', max_length=10)),
                ('file', models.FileField(blank=True, null=True, upload_to='reports/')),
                ('file_size', models.IntegerField(blank=True, null=True)),
                ('generated_at', models.DateTimeField(auto_now_add=True)),
                ('is_ready', models.BooleanField(default=False)),
                ('generation_time', models.FloatField(blank=True, help_text='Time taken in seconds', null=True)),
                ('error_message', models.TextField(blank=True)),
                ('is_public', models.BooleanField(default=False)),
                ('access_count', models.IntegerField(default=0)),
                ('generated_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-generated_at'],
            },
        ),
        migrations.CreateModel(
            name='Semester',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('semester_number', models.IntegerField(choices=[(1, 'Semester 1'), (2, 'Semester 2'), (3, 'Semester 3')])),
                ('name', models.CharField(max_length=50)),
                ('start_date', models.DateField()),
                ('end_date', models.DateField()),
                ('is_current', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('academic_year', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='semesters', to='core.academicyear')),
            ],
            options={
                'ordering': ['academic_year', 'semester_number'],
            },
        ),
        migrations.AddField(
            model_name='attachmentperiod',
            name='semester',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='attachment_periods', to='core.semester'),
        ),
        migrations.CreateModel(
            name='Student',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('registration_number', models.CharField(max_length=50, unique=True)),
                ('current_year', models.IntegerField(choices=[(1, 'Year 1'), (2, 'Year 2'), (3, 'Year 3'), (4, 'Year 4')], default=2)),
                ('current_semester', models.IntegerField(default=1)),
                ('current_status', models.CharField(choices=[('active', 'Active'), ('on_attachment', 'On Attachment'), ('completed', 'Completed'), ('graduated', 'Graduated'), ('withdrawn', 'Withdrawn'), ('probation', 'Academic Probation')], default='active', max_length=20)),
                ('cgpa', models.DecimalField(blank=True, decimal_places=2, max_digits=4, null=True)),
                ('credits_completed', models.IntegerField(default=0)),
                ('credits_required', models.IntegerField(default=160)),
                ('date_of_birth', models.DateField(blank=True, null=True)),
                ('gender', models.CharField(blank=True, choices=[('M', 'Male'), ('F', 'Female'), ('O', 'Other')], max_length=10)),
                ('personal_email', models.EmailField(max_length=254)),
                ('phone_number', models.CharField(max_length=15)),
                ('alternative_phone', models.CharField(blank=True, max_length=15)),
                ('physical_address', models.TextField(blank=True)),
                ('emergency_contact_name', models.CharField(max_length=200)),
                ('emergency_contact_phone', models.CharField(max_length=15)),
                ('emergency_contact_relation', models.CharField(max_length=50)),
                ('emergency_contact_alternate', models.CharField(blank=True, max_length=15)),
                ('cv', models.FileField(blank=True, null=True, upload_to='documents/students/cv/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf', 'doc', 'docx'])])),
                ('academic_transcript', models.FileField(blank=True, null=True, upload_to='documents/students/transcripts/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf'])])),
                ('recommendation_letter', models.FileField(blank=True, null=True, upload_to='documents/students/recommendations/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf', 'doc', 'docx'])])),
                ('passport_photo', models.ImageField(blank=True, null=True, upload_to='documents/students/photos/')),
                ('good_conduct_certificate', models.FileField(blank=True, null=True, upload_to='documents/students/conduct/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf'])])),
                ('insurance_cover', models.FileField(blank=True, null=True, upload_to='documents/students/insurance/', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['pdf'])])),
                ('bank_name', models.CharField(blank=True, max_length=100)),
                ('bank_branch', models.CharField(blank=True, max_length=100)),
                ('bank_account_name', models.CharField(blank=True, max_length=200)),
                ('bank_account_number', models.CharField(blank=True, max_length=50)),
                ('bank_swift_code', models.CharField(blank=True, max_length=20)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('course', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='students', to='core.course')),
                ('created_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='created_students', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['registration_number'],
            },
        ),
        migrations.AddField(
            model_name='attachmentapplication',
            name='student',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='applications', to='core.student'),
        ),
        migrations.CreateModel(
            name='UniversitySupervisor',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('employee_number', models.CharField(max_length=50, unique=True)),
                ('title', models.CharField(choices=[('prof', 'Professor'), ('dr', 'Dr.'), ('mr', 'Mr.'), ('mrs', 'Mrs.'), ('ms', 'Ms.')], max_length=10)),
                ('designation', models.CharField(max_length=100)),
                ('specialization', models.TextField()),
                ('employment_date', models.DateField()),
                ('is_permanent', models.BooleanField(default=True)),
                ('max_students', models.IntegerField(default=10, help_text='Maximum students they can supervise')),
                ('current_students', models.IntegerField(default=0)),
                ('office_location', models.CharField(blank=True, max_length=200)),
                ('office_phone', models.CharField(blank=True, max_length=15)),
                ('highest_qualification', models.CharField(max_length=200)),
                ('institution', models.CharField(max_length=200)),
                ('year_completed', models.IntegerField(blank=True, null=True)),
                ('cv', models.FileField(blank=True, null=True, upload_to='documents/supervisors/cv/')),
                ('academic_certificates', models.FileField(blank=True, null=True, upload_to='documents/supervisors/certificates/')),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('department', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='supervisors', to='core.department')),
            ],
        ),
        migrations.AddField(
            model_name='attachmentapplication',
            name='assigned_supervisor',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='assigned_applications', to='core.universitysupervisor'),
        ),
        migrations.AddField(
            model_name='attachmentapplication',
            name='department_approved_by',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='department_approved_applications', to='core.universitysupervisor'),
        ),
        migrations.CreateModel(
            name='UserProfile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('user_type', models.CharField(choices=[('student', 'Student'), ('university_supervisor', 'University Supervisor'), ('industry_supervisor', 'Industry Supervisor'), ('coordinator', 'Attachment Coordinator'), ('admin', 'Administrator')], default='student', max_length=30)),
                ('phone_number', models.CharField(max_length=15)),
                ('profile_picture', models.ImageField(blank=True, null=True, upload_to='profiles/')),
                ('department', models.CharField(blank=True, max_length=100)),
                ('employee_id', models.CharField(blank=True, max_length=50)),
                ('id_number', models.CharField(blank=True, help_text='National ID/Passport', max_length=20)),
                ('alternate_email', models.EmailField(blank=True, max_length=254)),
                ('postal_address', models.CharField(blank=True, max_length=200)),
                ('city', models.CharField(blank=True, max_length=100)),
                ('county', models.CharField(blank=True, max_length=100)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='profile', to=settings.AUTH_USER_MODEL)),
            ],
        ),
        migrations.AddField(
            model_name='universitysupervisor',
            name='user_profile',
            field=models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='supervisor_details', to='core.userprofile'),
        ),
        migrations.AddField(
            model_name='student',
            name='user_profile',
            field=models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='student_details', to='core.userprofile'),
        ),
        migrations.CreateModel(
            name='AnnouncementAcknowledgment',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('acknowledged_at', models.DateTimeField(auto_now_add=True)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('announcement', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='acknowledgments', to='core.announcement')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'unique_together': {('announcement', 'user')},
            },
        ),
        migrations.CreateModel(
            name='AuditLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('action_type', models.CharField(choices=[('create', 'Create'), ('update', 'Update'), ('delete', 'Delete'), ('view', 'View'), ('approve', 'Approve'), ('reject', 'Reject'), ('upload', 'Upload'), ('download', 'Download'), ('login', 'Login'), ('logout', 'Logout')], max_length=20)),
                ('model_name', models.CharField(max_length=100)),
                ('object_id', models.IntegerField(blank=True, null=True)),
                ('object_repr', models.CharField(blank=True, max_length=200)),
                ('changes', models.JSONField(blank=True, default=dict)),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True)),
                ('user_agent', models.TextField(blank=True)),
                ('timestamp', models.DateTimeField(auto_now_add=True)),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-timestamp'],
                'indexes': [models.Index(fields=['timestamp'], name='core_auditl_timesta_80074f_idx'), models.Index(fields=['user', 'timestamp'], name='core_auditl_user_id_7b678c_idx'), models.Index(fields=['action_type'], name='core_auditl_action__e03c3d_idx')],
            },
        ),
        migrations.CreateModel(
            name='Notification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('notification_type', models.CharField(choices=[('info', 'Information'), ('success', 'Success'), ('warning', 'Warning'), ('danger', 'Alert'), ('reminder', 'Reminder')], default='info', max_length=20)),
                ('title', models.CharField(max_length=200)),
                ('message', models.TextField()),
                ('link', models.CharField(blank=True, max_length=200)),
                ('is_read', models.BooleanField(default=False)),
                ('read_at', models.DateTimeField(blank=True, null=True)),
                ('is_archived', models.BooleanField(default=False)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('expires_at', models.DateTimeField(blank=True, null=True)),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['user', 'is_read'], name='core_notifi_user_id_cb8f07_idx'), models.Index(fields=['created_at'], name='core_notifi_created_d0c445_idx')],
            },
        ),
        migrations.AddIndex(
            model_name='organization',
            index=models.Index(fields=['verification_status'], name='core_organi_verific_602078_idx'),
        ),
        migrations.AddIndex(
            model_name='organization',
            index=models.Index(fields=['name'], name='core_organi_name_d0cc3b_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='semester',
            unique_together={('academic_year', 'semester_number')},
        ),
        migrations.AddIndex(
            model_name='attachmentperiod',
            index=models.Index(fields=['is_active'], name='core_attach_is_acti_1852f3_idx'),
        ),
        migrations.AddIndex(
            model_name='attachmentperiod',
            index=models.Index(fields=['application_deadline'], name='core_attach_applica_bd5d98_idx'),
        ),
        migrations.AddIndex(
            model_name='attachmentapplication',
            index=models.Index(fields=['status'], name='core_attach_status_57f773_idx'),
        ),
        migrations.AddIndex(
            model_name='attachmentapplication',
            index=models.Index(fields=['student', 'status'], name='core_attach_student_6aed08_idx'),
        ),
        migrations.AddIndex(
            model_name='attachmentapplication',
            index=models.Index(fields=['organization', 'status'], name='core_attach_organiz_b4cfa8_idx'),
        ),
        migrations.AlterUniqueTogether(
            name='attachmentapplication',
            unique_together={('student', 'attachment_period')},
        ),
        migrations.AddIndex(
            model_name='student',
            index=models.Index(fields=['registration_number'], name='core_studen_registr_c4f725_idx'),
        ),
        migrations.AddIndex(
            model_name='student',
            index=models.Index(fields=['current_status'], name='core_studen_current_ae0e1a_idx'),
        ),
    ]
